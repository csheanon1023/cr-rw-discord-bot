const { Client } = require('discord.js');
(async () => {
	const currentDate = new Date();
	const astraTimestamp = currentDate.toISOString().split('.')[0] + 'Z';
	const client = new Client({
		partials: ['MESSAGE', 'REACTION'],
	});
	await client.login(process.env.DISCORDJS_BOT_TOKEN);
	const channleIdByClan = {
		'#2PYUJUL': '904461174664470628',
		'#P9QQVJVG': '904472570135457853',
	};
	for (const clanTag of clanListCache) {
		const previousSeasonDetails = await getPreviousSeasonDetailsUptoSpecificBattleDayPeriod(clanTag);
		const unusedDecksReport = await generateBattleDayReportByPeriodIndex(clanTag, previousSeasonDetails.seasonId, previousSeasonDetails.periodIndex);
		saveBattleDayReportByPeriodIndex(clanTag, previousSeasonDetails.seasonId, previousSeasonDetails.periodIndex, unusedDecksReport, astraTimestamp);
		// sendBattleDayReport(client, channleIdByClan[clanTag], unusedDecksReport);
	}
})();